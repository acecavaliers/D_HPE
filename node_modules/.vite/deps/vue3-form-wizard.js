import {
  Fragment,
  createBaseVNode,
  createCommentVNode,
  createElementBlock,
  createTextVNode,
  createVNode,
  guardReactiveProps,
  normalizeClass,
  normalizeProps,
  normalizeStyle,
  openBlock,
  renderList,
  renderSlot,
  resolveComponent,
  toDisplayString,
  vShow,
  withCtx,
  withDirectives,
  withKeys
} from "./chunk-AZ23VQUG.js";
import "./chunk-5WWUZCGV.js";

// node_modules/vue3-form-wizard/dist/vue3-form-wizard.es.js
var x = (t, a) => {
  const e = t.__vccOpts || t;
  for (const [n, s] of a)
    e[n] = s;
  return e;
};
var V = {};
var N = {
  class: "wizard-btn",
  tabindex: "-1",
  type: "button"
};
function F(t, a, e, n, s, i) {
  return openBlock(), createElementBlock("button", N, [
    renderSlot(t.$slots, "default")
  ]);
}
var B = x(V, [["render", F]]);
var K = {
  name: "wizard-step",
  props: {
    tab: {
      type: Object,
      default: () => {
      }
    },
    transition: {
      type: String,
      default: ""
    },
    index: {
      type: Number,
      default: 0
    },
    disableBackOnClickStep: {
      type: Boolean,
      default: false
    }
  },
  computed: {
    iconActiveStyleBg() {
      return {
        backgroundColor: this.tab.color
      };
    },
    iconActiveStyle() {
      if (!this.tab.active)
        return { color: this.tab.color };
    },
    stepCheckedStyle() {
      return {
        borderColor: this.tab.color
      };
    },
    errorStyle() {
      return {
        borderColor: this.tab.errorColor,
        backgroundColor: this.tab.errorColor
      };
    },
    stepTitleStyle() {
      return {
        color: this.tab.validationError ? this.tab.errorColor : this.tab.color
      };
    },
    isStepSquare() {
      return this.tab.shape === "square";
    },
    isTabShape() {
      return this.tab.shape === "tab";
    },
    cursorStyle() {
      return this.disableBackOnClickStep ? "cursor: default" : "";
    }
  }
};
var R = ["tabindex", "id", "aria-controls", "aria-disabled", "aria-selected"];
var q = ["innerHTML"];
var M = ["innerHTML"];
function W(t, a, e, n, s, i) {
  return openBlock(), createElementBlock("li", {
    class: normalizeClass({ active: e.tab.active })
  }, [
    createBaseVNode("a", {
      href: "javascript:void(0)",
      class: normalizeClass({ disabled: !e.tab.checked }),
      style: normalizeStyle(i.cursorStyle)
    }, [
      createBaseVNode("div", {
        class: normalizeClass(["wizard-icon-circle md", {
          checked: e.tab.checked,
          square_shape: i.isStepSquare,
          tab_shape: i.isTabShape
        }]),
        role: "tab",
        tabindex: e.tab.checked ? 0 : "",
        id: `step-${e.tab.tabId}`,
        "aria-controls": e.tab.tabId,
        "aria-disabled": e.tab.active,
        "aria-selected": e.tab.active,
        style: normalizeStyle([
          e.tab.checked ? i.stepCheckedStyle : {},
          e.tab.validationError ? i.errorStyle : {}
        ])
      }, [
        e.tab.active ? (openBlock(), createElementBlock("div", {
          key: 0,
          class: normalizeClass(["wizard-icon-container", { square_shape: i.isStepSquare, tab_shape: i.isTabShape }]),
          style: normalizeStyle([i.iconActiveStyleBg, e.tab.validationError ? i.errorStyle : {}])
        }, [
          renderSlot(t.$slots, "active-step", {}, () => [
            e.tab.customIcon ? (openBlock(), createElementBlock("span", {
              key: 0,
              class: "wizard-icon",
              innerHTML: e.tab.customIcon
            }, null, 8, q)) : (openBlock(), createElementBlock("i", {
              key: 1,
              class: normalizeClass([e.tab.icon ? e.tab.icon : "", "wizard-icon"]),
              style: normalizeStyle(e.tab.checked ? i.iconActiveStyle : "")
            }, toDisplayString(e.tab.icon ? null : e.index + 1), 7))
          ])
        ], 6)) : renderSlot(t.$slots, "default", { key: 1 }, () => [
          e.tab.customIcon ? (openBlock(), createElementBlock("span", {
            key: 0,
            class: "wizard-icon",
            innerHTML: e.tab.customIcon
          }, null, 8, M)) : (openBlock(), createElementBlock("i", {
            key: 1,
            class: normalizeClass([e.tab.icon ? e.tab.icon : "", "wizard-icon"]),
            style: normalizeStyle(e.tab.checked ? i.iconActiveStyle : "")
          }, toDisplayString(e.tab.icon ? null : e.index + 1), 7))
        ])
      ], 14, R),
      renderSlot(t.$slots, "title", {}, () => [
        createBaseVNode("span", {
          class: normalizeClass(["stepTitle", { active: e.tab.active, has_error: e.tab.validationError }]),
          style: normalizeStyle([e.tab.active || e.tab.checked ? i.stepTitleStyle : {}, { "margin-top": "5px" }])
        }, toDisplayString(e.tab.title), 7)
      ]),
      renderSlot(t.$slots, "customIcon")
    ], 6)
  ], 2);
}
var _ = x(K, [["render", W]]);
function j() {
  return document.activeElement.id;
}
function p(t = []) {
  let a = j();
  return t.findIndex((n) => n.tabId === a);
}
function z(t) {
  document.getElementById(t).focus();
}
function H(t) {
  return t.then && typeof t.then == "function";
}
var D = {
  name: "form-wizard",
  components: {
    WizardButton: B,
    WizardStep: _
  },
  props: {
    id: {
      type: String,
      default: "fw_" + (/* @__PURE__ */ new Date()).valueOf()
    },
    title: {
      type: String,
      default: "Awesome Wizard"
    },
    subtitle: {
      type: String,
      default: "Split a complicated flow in multiple steps"
    },
    nextButtonText: {
      type: String,
      default: "Next"
    },
    backButtonText: {
      type: String,
      default: "Back"
    },
    finishButtonText: {
      type: String,
      default: "Finish"
    },
    hideButtons: {
      type: Boolean,
      default: false
    },
    validateOnBack: Boolean,
    color: {
      type: String,
      default: "#e74c3c"
    },
    errorColor: {
      type: String,
      default: "#8b0000"
    },
    shape: {
      type: String,
      default: "circle"
    },
    layout: {
      type: String,
      default: "horizontal"
    },
    stepsClasses: {
      type: [String, Array],
      default: ""
    },
    stepSize: {
      type: String,
      default: "md",
      validator: (t) => ["xs", "sm", "md", "lg"].indexOf(t) !== -1
    },
    transition: {
      type: String,
      default: ""
    },
    startIndex: {
      type: Number,
      default: 0,
      validator: (t) => t >= 0
    },
    disableBackOnClickStep: {
      type: Boolean,
      default: false
    },
    disableBack: {
      type: Boolean,
      default: false
    }
  },
  provide() {
    return {
      addTab: this.addTab,
      removeTab: this.removeTab
    };
  },
  data() {
    return {
      activeTabIndex: 0,
      currentPercentage: 0,
      maxStep: 0,
      loading: false,
      tabs: []
    };
  },
  computed: {
    slotProps() {
      return {
        nextTab: this.nextTab,
        prevTab: this.prevTab,
        activeTabIndex: this.activeTabIndex,
        isLastStep: this.isLastStep,
        fillButtonStyle: this.fillButtonStyle
      };
    },
    tabCount() {
      return this.tabs.length;
    },
    isLastStep() {
      return this.activeTabIndex === this.tabCount - 1;
    },
    isVertical() {
      return this.layout === "vertical";
    },
    displayPrevButton() {
      return this.activeTabIndex !== 0;
    },
    stepPercentage() {
      return 1 / (this.tabCount * 2) * 100;
    },
    progressBarStyle() {
      return {
        backgroundColor: this.color,
        width: `${this.progress}%`,
        color: this.color
      };
    },
    fillButtonStyle() {
      return {
        backgroundColor: this.color,
        borderColor: this.color,
        color: "white"
      };
    },
    progress() {
      let t = 0;
      if (this.activeTabIndex > 0) {
        let a = 1, e = 2;
        t = this.stepPercentage * (this.activeTabIndex * e + a);
      } else
        t = this.stepPercentage;
      return t;
    }
  },
  methods: {
    emitTabChange(t, a) {
      this.$emit("on-change", t, a), this.$emit("update:startIndex", a);
    },
    addTab(t) {
      const a = this.tabCount;
      t.tabId = `${t.title.replace(/ /g, "")}${a}`, this.tabs.splice(a, 0, t), a < this.activeTabIndex + 1 && (this.maxStep = a, this.changeTab(this.activeTabIndex + 1, a));
    },
    removeTab(t) {
      const a = this.tabs, e = a.indexOf(t);
      e > -1 && (e === this.activeTabIndex && (this.maxStep = this.activeTabIndex - 1, this.changeTab(this.activeTabIndex, this.activeTabIndex - 1)), e < this.activeTabIndex && (this.maxStep = this.activeTabIndex - 1, this.activeTabIndex = this.activeTabIndex - 1, this.emitTabChange(this.activeTabIndex + 1, this.activeTabIndex)), a.splice(e, 1));
    },
    reset() {
      this.maxStep = 0, this.tabs.forEach((t) => {
        t.checked = false;
      }), this.navigateToTab(0);
    },
    activateAll() {
      this.maxStep = this.tabs.length - 1, this.tabs.forEach((t) => {
        t.checked = true;
      });
    },
    navigateToTab(t) {
      let a = t > this.activeTabIndex;
      if (t <= this.maxStep) {
        let e = () => {
          a && t - this.activeTabIndex > 1 ? (this.changeTab(this.activeTabIndex, this.activeTabIndex + 1), this.beforeTabChange(this.activeTabIndex, e)) : (this.changeTab(this.activeTabIndex, t), this.afterTabChange(this.activeTabIndex));
        };
        a ? this.beforeTabChange(this.activeTabIndex, e) : (this.setValidationError(null), e());
      }
      return t <= this.maxStep;
    },
    nextTab() {
      let t = () => {
        this.activeTabIndex < this.tabCount - 1 ? (this.changeTab(this.activeTabIndex, this.activeTabIndex + 1), this.afterTabChange(this.activeTabIndex)) : this.$emit("on-complete");
      };
      this.beforeTabChange(this.activeTabIndex, t);
    },
    prevTab() {
      let t = () => {
        this.activeTabIndex > 0 && (this.setValidationError(null), this.changeTab(this.activeTabIndex, this.activeTabIndex - 1));
      };
      this.validateOnBack ? this.beforeTabChange(this.activeTabIndex, t) : t();
    },
    focusNextTab() {
      let t = p(this.tabs);
      if (t !== -1 && t < this.tabs.length - 1) {
        let a = this.tabs[t + 1];
        a.checked && z(a.tabId);
      }
    },
    focusPrevTab() {
      let t = p(this.tabs);
      if (t !== -1 && t > 0) {
        let a = this.tabs[t - 1].tabId;
        z(a);
      }
    },
    setLoading(t) {
      this.loading = t, this.$emit("on-loading", t);
    },
    setValidationError(t) {
      this.tabs[this.activeTabIndex].validationError = t, this.$emit("on-error", t);
    },
    validateBeforeChange(t, a) {
      if (this.setValidationError(null), H(t))
        this.setLoading(true), t.then((e) => {
          this.setLoading(false);
          let n = e === true;
          this.executeBeforeChange(n, a);
        }).catch((e) => {
          this.setLoading(false), this.setValidationError(e);
        });
      else {
        let e = t === true;
        this.executeBeforeChange(e, a);
      }
    },
    executeBeforeChange(t, a) {
      this.$emit("on-validate", t, this.activeTabIndex), t ? a() : this.tabs[this.activeTabIndex].validationError = "error";
    },
    beforeTabChange(t, a) {
      if (this.loading)
        return;
      let e = this.tabs[t];
      if (e && e.beforeChange !== void 0) {
        let n = e.beforeChange();
        this.validateBeforeChange(n, a);
      } else
        a();
    },
    afterTabChange(t) {
      if (this.loading)
        return;
      let a = this.tabs[t];
      a && a.afterChange !== void 0 && a.afterChange();
    },
    changeTab(t, a, e = true) {
      let n = this.tabs[t], s = this.tabs[a];
      return n && (n.active = false), s && (s.active = true), e && this.activeTabIndex !== a && this.emitTabChange(t, a), this.activeTabIndex = a, this.activateTabAndCheckStep(this.activeTabIndex), true;
    },
    tryChangeRoute(t) {
      this.$router && t.route && this.$router.push(t.route);
    },
    checkRouteChange(t) {
      let a = -1, e = this.tabs.find((n, s) => {
        let i = n.route === t;
        return i && (a = s), i;
      });
      if (e && !e.active) {
        const n = a > this.activeTabIndex;
        this.navigateToTab(a, n);
      }
    },
    deactivateTabs() {
      this.tabs.forEach((t) => {
        t.active = false;
      });
    },
    activateTab(t) {
      this.deactivateTabs();
      let a = this.tabs[t];
      a && (a.active = true, a.checked = true, this.tryChangeRoute(a));
    },
    activateTabAndCheckStep(t) {
      this.activateTab(t), t > this.maxStep && (this.maxStep = t), this.activeTabIndex = t;
    },
    initializeTabs() {
      this.tabs.length > 0 && this.startIndex === 0 && this.activateTab(this.activeTabIndex), this.startIndex < this.tabs.length ? this.activateTabAndCheckStep(this.startIndex) : window.console.warn(
        `Prop startIndex set to ${this.startIndex} is greater than the number of tabs - ${this.tabs.length}. Make sure that the starting index is less than the number of tabs registered`
      );
    }
  },
  mounted() {
    this.initializeTabs();
  },
  watch: {
    "$route.path"(t) {
      this.checkRouteChange(t);
    }
  }
};
var G = ["id"];
var J = {
  key: 0,
  class: "wizard-header"
};
var Q = { class: "wizard-title" };
var U = { class: "category" };
var X = { class: "wizard-navigation" };
var Y = {
  key: 0,
  class: "wizard-progress-with-circle"
};
var Z = { class: "wizard-tab-content" };
var $ = {
  key: 1,
  class: "wizard-card-footer clearfix"
};
var tt = {
  key: 0,
  class: "wizard-footer-left"
};
var et = { class: "wizard-footer-right" };
function at(t, a, e, n, s, i) {
  const w = resolveComponent("wizard-step"), S = resolveComponent("wizard-button");
  return openBlock(), createElementBlock("div", {
    id: e.id ? e.id : "",
    class: normalizeClass(["vue-form-wizard", [e.stepSize, { vertical: i.isVertical }]]),
    onKeyup: [
      a[6] || (a[6] = withKeys((...r) => i.focusNextTab && i.focusNextTab(...r), ["right"])),
      a[7] || (a[7] = withKeys((...r) => i.focusPrevTab && i.focusPrevTab(...r), ["left"]))
    ]
  }, [
    t.$slots.title ? (openBlock(), createElementBlock("div", J, [
      renderSlot(t.$slots, "title", {}, () => [
        createBaseVNode("h4", Q, toDisplayString(e.title), 1),
        createBaseVNode("p", U, toDisplayString(e.subtitle), 1)
      ])
    ])) : createCommentVNode("", true),
    createBaseVNode("div", X, [
      i.isVertical ? createCommentVNode("", true) : (openBlock(), createElementBlock("div", Y, [
        createBaseVNode("div", {
          class: "wizard-progress-bar",
          style: normalizeStyle(i.progressBarStyle)
        }, null, 4)
      ])),
      createBaseVNode("ul", {
        class: normalizeClass(["wizard-nav wizard-nav-pills", e.stepsClasses]),
        role: "tablist"
      }, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(s.tabs, (r, y) => renderSlot(t.$slots, "step", {
          tab: r,
          index: y,
          navigateToTab: i.navigateToTab,
          stepSize: e.stepSize,
          transition: e.transition
        }, () => [
          createVNode(w, {
            tab: r,
            "step-size": e.stepSize,
            onClick: (E) => e.disableBackOnClickStep || e.disableBack ? false : i.navigateToTab(y),
            onKeyup: withKeys((E) => i.navigateToTab(y), ["enter"]),
            transition: e.transition,
            index: y,
            "disable-back-on-click-step": e.disableBack ? true : e.disableBackOnClickStep
          }, null, 8, ["tab", "step-size", "onClick", "onKeyup", "transition", "index", "disable-back-on-click-step"])
        ])), 256))
      ], 2),
      createBaseVNode("div", Z, [
        renderSlot(t.$slots, "default", normalizeProps(guardReactiveProps(i.slotProps)))
      ])
    ]),
    e.hideButtons ? createCommentVNode("", true) : (openBlock(), createElementBlock("div", $, [
      renderSlot(t.$slots, "footer", normalizeProps(guardReactiveProps(i.slotProps)), () => [
        e.disableBack ? createCommentVNode("", true) : (openBlock(), createElementBlock("div", tt, [
          i.displayPrevButton ? (openBlock(), createElementBlock("span", {
            key: 0,
            onClick: a[0] || (a[0] = (...r) => i.prevTab && i.prevTab(...r)),
            onKeyup: a[1] || (a[1] = withKeys((...r) => i.prevTab && i.prevTab(...r), ["enter"])),
            role: "button",
            tabindex: "0"
          }, [
            renderSlot(t.$slots, "prev", normalizeProps(guardReactiveProps(i.slotProps)), () => [
              createVNode(S, {
                style: normalizeStyle(i.fillButtonStyle),
                disabled: s.loading
              }, {
                default: withCtx(() => [
                  createTextVNode(toDisplayString(e.backButtonText), 1)
                ]),
                _: 1
              }, 8, ["style", "disabled"])
            ])
          ], 32)) : createCommentVNode("", true),
          renderSlot(t.$slots, "custom-buttons-left", normalizeProps(guardReactiveProps(i.slotProps)))
        ])),
        createBaseVNode("div", et, [
          renderSlot(t.$slots, "custom-buttons-right", normalizeProps(guardReactiveProps(i.slotProps))),
          i.isLastStep ? (openBlock(), createElementBlock("span", {
            key: 0,
            onClick: a[2] || (a[2] = (...r) => i.nextTab && i.nextTab(...r)),
            onKeyup: a[3] || (a[3] = withKeys((...r) => i.nextTab && i.nextTab(...r), ["enter"])),
            role: "button",
            tabindex: "0"
          }, [
            renderSlot(t.$slots, "finish", normalizeProps(guardReactiveProps(i.slotProps)), () => [
              createVNode(S, {
                style: normalizeStyle(i.fillButtonStyle)
              }, {
                default: withCtx(() => [
                  createTextVNode(toDisplayString(e.finishButtonText), 1)
                ]),
                _: 1
              }, 8, ["style"])
            ])
          ], 32)) : (openBlock(), createElementBlock("span", {
            key: 1,
            onClick: a[4] || (a[4] = (...r) => i.nextTab && i.nextTab(...r)),
            onKeyup: a[5] || (a[5] = withKeys((...r) => i.nextTab && i.nextTab(...r), ["enter"])),
            role: "button",
            tabindex: "0"
          }, [
            renderSlot(t.$slots, "next", normalizeProps(guardReactiveProps(i.slotProps)), () => [
              createVNode(S, {
                style: normalizeStyle(i.fillButtonStyle),
                disabled: s.loading
              }, {
                default: withCtx(() => [
                  createTextVNode(toDisplayString(e.nextButtonText), 1)
                ]),
                _: 1
              }, 8, ["style", "disabled"])
            ])
          ], 32))
        ])
      ])
    ]))
  ], 42, G);
}
var it = x(D, [["render", at]]);
var st = {
  name: "tab-content",
  props: {
    title: {
      type: String,
      default: ""
    },
    icon: {
      type: String,
      default: ""
    },
    customIcon: {
      type: String,
      default: ""
    },
    lazy: {
      type: Boolean,
      default: false
    },
    beforeChange: {
      type: Function
    },
    afterChange: {
      type: Function
    },
    route: {
      type: [String, Object]
    },
    additionalInfo: {
      type: Object,
      default: () => {
      }
    }
  },
  inject: ["addTab", "removeTab"],
  data() {
    return {
      active: false,
      validationError: null,
      checked: false,
      tabId: ""
    };
  },
  computed: {
    shape() {
      return this.$parent.shape;
    },
    color() {
      return this.$parent.color;
    },
    errorColor() {
      return this.$parent.errorColor;
    }
  },
  mounted() {
    this.addTab(this);
  },
  destroyed() {
    this.$el && this.$el.parentNode && this.$el.parentNode.removeChild(this.$el), this.removeTab(this);
  }
};
var nt = ["id", "aria-hidden", "aria-labelledby"];
function rt(t, a, e, n, s, i) {
  return !e.lazy || s.active ? withDirectives((openBlock(), createElementBlock("div", {
    key: 0,
    class: "wizard-tab-container",
    role: "tabpanel",
    id: s.tabId,
    "aria-hidden": !s.active,
    "aria-labelledby": `step-${s.tabId}`
  }, [
    renderSlot(t.$slots, "default", { active: s.active }),
    renderSlot(t.$slots, "customIcon")
  ], 8, nt)), [
    [vShow, s.active]
  ]) : createCommentVNode("", true);
}
var lt = x(st, [["render", rt]]);
var dt = {
  install(t) {
    t.component("form-wizard", it), t.component("tab-content", lt), t.component("wizard-button", B), t.component("wizard-step", _);
  }
};
export {
  it as FormWizard,
  lt as TabContent,
  B as WizardButton,
  _ as WizardStep,
  dt as default
};
//# sourceMappingURL=vue3-form-wizard.js.map
